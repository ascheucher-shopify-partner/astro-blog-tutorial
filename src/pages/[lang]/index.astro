---
import { languages } from "@lib/i18n/ui";
import { otherLanguage, useTranslations } from "@lib/i18n/utils";
import { getRelativeLocaleUrl } from "astro/virtual-modules/i18n.js";

import Greeting from "@components/Greeting";
import BaseLayout from "../../layouts/BaseLayout.astro";

const pageTitle = "SaaSQuadrat";

export async function getStaticPaths() {
  const langKeys = Object.keys(languages);
  const paths = langKeys.map((lk) => {
    const otherLang = otherLanguage(lk);
    return {
      params: {
        lang: lk,
      },
      props: {
        otherLangPath: `${getRelativeLocaleUrl(otherLang)}`,
      },
    };
  });

  return paths;
}
const { lang } = Astro.params;
const { otherLangPath } = Astro.props;

const t = useTranslations(lang as 'en' | 'de');
---

<BaseLayout lang={lang} langSwitchPath={otherLangPath} pageTitle={pageTitle}>
  <h2>{t('home.subtitle')}</h2>
  <Greeting
    client:load
    messages={[t('greeting.hi'), t('greeting.hello'), t('greeting.howdy'), t('greeting.hey'), t('greeting.griazi'), t('greeting.servus')]}
  />
</BaseLayout>
